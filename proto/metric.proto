syntax = "proto3";

package metrics;

option go_package = "collecting-ma/proto";

enum mtype {
    GAUGE = 0;
    COUNTER = 1;
}

message Metric {
    string ID = 1;
    mtype mtype = 2;
    int64 delta = 3;
    double value = 4;
    string hash = 5;
}

message AddMetricRequest{
    Metric metric = 1;
}

message AddMetricResponse{
}

message GetMetricRequest{
    string ID = 1;
    mtype mtype = 2;
}

message GetMetricResponse{
    string ID = 1;
    int64 delta = 2;
    double value = 3;
    string error = 4;
}

message ListMetricRequest {
    int32 offset = 1;
    int32 limit = 2; 
}
  
message ListMetricResponse {
    int32 count = 1;            
    repeated Metric metric = 2;
}

service Metrics {
    rpc AddMetric(AddMetricRequest) returns (AddMetricResponse);
    rpc GetMetric(GetMetricRequest) returns (GetMetricResponse);
    rpc ListMetric(ListMetricRequest) returns (ListMetricResponse);
}